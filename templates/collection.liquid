<script src="https://unpkg.com/vue@next"></script>

{% paginate collection.products by 120 %}

<div class="bmg_main_collection">
  <div class="bmgmc_breadcrumbs">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          {% include 'breadcrumb' %}
        </div>
      </div>  
    </div>
  </div>
  <div class="bmgmc_main_body">
    <div class="container">
      <div class="row">
        <div class="col-md-3 bmg_sidebar_filter">
          <div class="bmg_sidebar_filter_body">
            {% include 'collection-tags' %}
          </div>
        </div>
        <div class="col-md-9 bmg_mainbody">
            <div class="bmgmc_sorting_view">
              {% include 'collection-sorting' %}
              <div class="bmgmc_grid_list">
                <div id="listView">

                </div>
                <div id="gridView">

                </div>
              </div>
            </div>
            <div class="bmg_collection_products">
              <div id="myData"></div>
              <script>
                  fetch('https://www.bmgind.com/collections/{{ collection.handle }}?view=json')
                      .then(function (response) {
                          return response.json();
                      })
                      .then(function (data) {
                          appendData(data);
                      })
                      .catch(function (err) {
                          console.log('error: ' + err);
                      });
                  function appendData(data) {
                      var mainContainer = document.getElementById("myData");
                      for (var i = 0; i < data.length; i++) {
                          var div = document.createElement("div");
                          div.innerHTML = 'Name: ' + data[i].title + ' ' + data[i].totalproducts;
                          mainContainer.appendChild(div);
                      }
                  }
              </script>
            </div>
            {% if paginate.pages > 1 %}
              {% include 'pagination' %}
            {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endpaginate %}
