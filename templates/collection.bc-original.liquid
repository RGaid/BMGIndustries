{% assign paginationAmount = 48 %}
{% if cart.attributes.pagination != blank %}
  {% assign paginationAmount = cart.attributes.pagination | default:12 | abs %}
{% endif %}
{% paginate collection.products by paginationAmount %}
{% assign customlayout = collection.metafields.layout['option'] %}

  {%assign coll_image = collection.image.src | img_url: '1400x300'%}
<header class="section-header section-header--large collectionheader">
  <div class="collectiontitle">
    <div class="collectiontitleinner">
      <h1 class="section-header__title bc-sf-filter-collection-title">{{ collection.title }}</h1>
      {%if page_description %}<p class="bc-sf-filter-page-description">{{ page_description }}</p>{%endif%}
    </div>
  </div>
  
</header>
<p class="space20" />

<div class="centercontent" id="CollectionSection" data-section-id="{{ section.id }}" data-section-type="collection-template" data-sort-enabled="true" data-tags-enabled="true">


  <div class="grid containerswap">
   
    {% if customlayout == 'sidebar' %}
    <div class="grid__item two-twelfths medium--one-whole small--one-whole sidebar swap1">
	  <div id="bc-sf-filter-tree"></div>             
    </div>

    
    <div class="grid__item nine-twelfths medium--one-whole small--one-whole nopadding swap2">
      <div class="sortingbar">
        <div class="form-horizontal grid__item one-whole medium--one-half small--one-half nopadding">
            <!--bs filter code-->
            <div id="bc-sf-filter-tree-mobile"></div>         
        </div>

        <div class="form-horizontal grid__item one-whole medium--one-half small--one-half nopadding">
          <!--bs filter code-->        
          <div id="bc-sf-filter-top-sorting"></div>       
        </div>
        <div class="clearfix"></div> 
      </div>
        
    </div>  
    
    {% else %} 

    <div class="grid__item one-whole nopadding">
      <div class="sortingbar">
        <div class="form-horizontal grid__item one-half nopadding">
        </div>
        <div class="form-horizontal grid__item one-whole medium--one-half small--one-half nopadding">
        {% include 'collection-sorting' %}
        </div> 
         <div class="clearfix"></div> 

      </div>    
    </div>    
    
    {% endif %} 
    
    <div class="grid__item {% if customlayout == 'sidebar' %}nine-twelfths{% else %} one-whole{% endif %} medium--one-whole small--one-whole nopadding swap3">
	  <!--bs filter code-->      
      <div id="bc-sf-filter-products" class="grid-uniform grid-link__container">
		{% if customlayout == 'sidebar' %}
        	{% assign grid_item_width = 'wide--one-third medium--one-half small--one-half' %}
        {% else %} 
        	{% assign grid_item_width = 'wide--one-quarter medium--one-half small--one-half' %}        
        {% endif %}        
        {%- assign product_width = 335 -%}
        {% if collection.products  != empty %}
          {% for product in collection.products %}
            {% assign featured = product %}
            <div class="grid__item {{grid_item_width}}">
              {% include 'product-grid-item' %}
            </div>
          {% endfor %}
        {% else %}
          {% if shop.products_count == 0 %}
            <div class="grid__item">
              <div class="helper-section">
                <div class="grid-uniform helper-content{% if section.settings.center_grid_link %} text-center{% endif %}">
                  {% for i in (1..8) %}
                    <div class="grid__item one-half post-large--one-quarter">
                      <a href="/admin/products" class="grid-link">
                        <span class="grid-link__image grid-link__image--product">
                          <span class="grid-link__image-centered">
                            {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
                            {{ 'product-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}
                          </span>
                        </span>
                        <p class="grid-link__title">{{ 'home_page.onboarding.product_title' | t }}</p>
                        <p class="grid-link__meta">
                          <strong>$19.99</strong>
                        </p>
                      </a>
                    </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          {% else %}
            <div class="grid__item">
              <p class="nomatch"><em>{{ 'collections.general.no_matches' | t }}</em></p>
            </div>
          {% endif %}
        {% endif %}
      </div>
      
      {% if customlayout == 'sidebar' %}
      <!--bs filter code-->
      <div id="bc-sf-filter-bottom-pagination"></div>
	  {% else %}	
      
        {% if paginate.pages > 1 %}
          {% include 'pagination' %}
        {% endif %}
      {% endif %}
      
    </div>
  </div>
</div>
    <p class="space50" />

 	{% if collection.description != blank %}
    <div class="rte colldesc">
      <div class="centercontent" >
        <div class="bc-sf-filter-collection-description">{{ collection.description }}</div>
      </div>
    </div>
	{% endif %}

{% endpaginate %}


{% comment %} <script>
  // Declare bcSfFilterConfig variable
  var bcSfFilterConfig = {
    shop: {
      apiUrl: 'https://services.mybcapps.com/bc-sf-filter/filter',
      name: '{{ shop.name }}',
      domain: '{{ shop.permanent_domain }}',
      currency: '{{ shop.currency }}',
      money_format: '{{ shop.money_format }}'
    },
    general: {
      file_url: "{{ '' | file_url }}",
      collection_id: {{ collection.id | default: 0 }},
      collection_handle: "{{ collection.handle }}",
      default_sort_by: "{{ collection.default_sort_by }}",
      swatch_extension: "png",
      no_image_url: "{{ 'bc-sf-filter-no-image.gif' | asset_url }}"
    },
    label: {
      sale: "{{ 'products.product.sale' | t }}",
      sold_out: "{{ 'products.product.sold_out' | t }}",
      regular_price: "{{ 'products.product.regular_price' | t }}",
      sale_price: "{{ 'products.product.sale_price' | t }}",
      from_price: "{{ 'products.general.from_html' | t }}",
      homepage_product_title: "{{ 'home_page.onboarding.product_title' | t }}",
      sorting: "{{ 'collections.sorting.title' | t }}",
      sorting_featured: "{{ 'collections.sorting.featured' | t }}",
      sorting_title_ascending: "{{ 'collections.sorting.az' | t }}",
      sorting_title_descending: "{{ 'collections.sorting.za' | t }}",
      sorting_price_ascending: "{{ 'collections.sorting.price_ascending' | t }}",
      sorting_price_descending: "{{ 'collections.sorting.price_descending' | t }}",
      sorting_date_ascending: "{{ 'collections.sorting.date_ascending' | t }}",
      sorting_date_descending: "{{ 'collections.sorting.date_descending' | t }}",
    },
    cart: {
      pagination: "{{ cart.attributes.pagination }}"
    },
    section: {
      center_grid_link: {% if section.settings.center_grid_link != nil %} {{ section.settings.center_grid_link | json }} {% else %} false {% endif %},
      show_sale_circle: true,
      show_sold_out_circle: true,
      vendor_enable: {% if section.settings.vendor_enable != nil %} {{ section.settings.vendor_enable }} {% else %} false {% endif %},
      show_review: 1
    }
  };
</script>

<script>
  // Declare bcSfFilterConfig variable
  var bcSfFilterMainConfig = {
    api: {
      filterUrl: 'https://services.mybcapps.com/bc-sf-filter/filter',
      searchUrl: 'https://services.mybcapps.com/bc-sf-filter/search',
      suggestionUrl: 'https://services.mybcapps.com/bc-sf-filter/search/suggest',
    },
    shop: {
      name: '{{ shop.name | escape }}',
      url: '{{ shop.url }}',
      domain: '{{ shop.permanent_domain }}',
      currency: '{{ shop.currency }}',
      money_format: '{{ shop.money_format | replace: "'", '"' | replace: "$", "&#36;" }}'
    },
    general: {
      file_url: "{{ '' | file_url }}",
      asset_url: "{{ 'bc-sf-filter.js' | asset_url }}",
      collection_id: {{ collection.id | default: 0 }},
      collection_handle: "{{ collection.handle }}",
      {% if template contains 'collection' and collection.handle %}
      collection_count: {{ collection.products_count  }},
      {% endif %}
      collection_tags: {{ current_tags | json }},
      current_tags: {{ current_tags | json }},
      default_sort_by: "{{ collection.default_sort_by }}",
      swatch_extension: "png",
      no_image_url: "{{ 'bc-sf-filter-no-image.gif' | asset_url }}",
      search_term: "{{ search.terms | default: '' }}",
      template: "{{ template }}"
    },
    {% if shop.metafields.bc-sf-filter.settings != blank %}
    settings: {{ shop.metafields.bc-sf-filter.settings }},
    {% endif %}
  };
  function mergeObject(obj1, obj2){
    var obj3 = {};
    for (var attr in obj1) { obj3[attr] = obj1[attr]; }
    for (var attr in obj2) { obj3[attr] = obj2[attr]; }
    return obj3;
  }
  if (typeof bcSfFilterConfig !== 'undefined') {
    var bcSfFilterConfig = mergeObject(bcSfFilterConfig, bcSfFilterMainConfig); 
  } else {
    var bcSfFilterConfig = mergeObject({}, bcSfFilterMainConfig); 
  }
</script>


{% if customlayout == 'sidebar' %}
<!-- Include Resources -->
{{ 'bc-sf-filter-lib.js' | asset_url | script_tag }}
{{ 'bc-sf-filter.js' | asset_url | script_tag }}

<!-- Initialize App -->
<script>
  var bcsffilter = new BCSfFilter();
  bcsffilter.init();
</script>

<script>bcsffilter.initFilter();</script>
{% endif %} {% endcomment %}
  